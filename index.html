<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Golf Tournament Tracker</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheetont-family: 'Roboto', sans-serif;
      margin: 0;
      background: linear-gradient(to right, #1e3c72, #2a5298);
      color: #fff;
    }
    header {
      text-align: center;
      padding: 1rem;
      background-color: rgba(0,0,0,0.2);
    }
    h1 {
      margin: 0;
      font-size: 1.8rem;
    }
    .container {
      padding: 1rem;
      max-width: 900px;
      margin: auto;
    }
    .group {
      margin-bottom: 2rem;
      background-color: rgba(255,255,255,0.1);
      padding: 1rem;
      border-radius: 8px;
    }
    .group h2 {
      margin-top: 0;
      font-size: 1.2rem;
      border-bottom: 1px solid #ccc;
      padding-bottom: 0.5rem;
    }
    .match {
      display: flex;
      justify-content: space-between;
      margin: 0.5rem 0;
      align-items: center;
    }
    .match span {
      flex: 1;
    }
    select, button {
      padding: 0.3rem;
      margin-left: 0.5rem;
      border-radius: 4px;
      border: none;
    }
    button {
      background-color: #4CAF50;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background-color: #45a049;
    }
    @media (max-width: 600px) {
      .match {
        flex-direction: column;
        align-items: flex-start;
      }
      select, button {
        margin-top: 0.5rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Golf Tournament Tracker</h1>
    <p>Record and view match results in real time</p>
  </header>
  <div class="container" id="tournament"></div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.jsscript src="https://www.gstatic.com.23.0/firebase-database-compat.js</script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBt0TdlBuKMEMuN8zdk2_WvThfNIdTqEMM",
      authDomain: "taylormadegolf.firebaseapp.com",
      databaseURL: "https://taylormadegolf-default-rtdb.firebaseio.com",
      projectId: "taylormadegolf",
      storageBucket: "taylormadegolf.appspot.com",
      messagingSenderId: "555940836513",
      appId: "1:555940836513:web:1458ef3f473219784b2ce0"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const groups = {
      "Group A": ["Craig Schneider", "Buddha Gurung", "Mike Callagy", "Cesar Zepeda"],
      "Group B": ["Elliot Badar", "Tom Collard", "Sree Gottipati", "Brian Crumrine"],
      "Group C": ["Nathan Kelly", "Rick Lines", "David Damitz", "Paul Wollenburg"],
      "Group D": ["Quyen Dang", "Abram Rios", "Keshav Prasad", "Ali Chitsaz", "Konda Reddy Polu"]
    };

    function createMatchKey(p1, p2) {
      return [p1, p2].sort().join("_vs_");
    }

    function renderTournament() {
      const container = document.getElementById("tournament");
      container.innerHTML = "";

      for (const [groupName, players] of Object.entries(groups)) {
        const groupDiv = document.createElement("div");
        groupDiv.className = "group";
        groupDiv.innerHTML = `<h2>${groupName}</h2>`;

        const matches = [];

        for (let i = 0; i < players.length; i++) {
          for (let j = i + 1; j < players.length; j++) {
            const p1 = players[i];
            const p2 = players[j];

            // Special rule: Ali does NOT play Konda
            if (groupName === "Group D" && ((p1 === "Ali Chitsaz" && p2 === "Konda Reddy Polu") || (p2 === "Ali Chitsaz" && p1 === "Konda Reddy Polu"))) {
              continue;
            }

            const matchKey = createMatchKey(p1, p2);
            const matchDiv = document.createElement("div");
            matchDiv.className = "match";
            matchDiv.id = matchKey;

            matchDiv.innerHTML = `
              <span>${p1} vs ${p2}</span>
              <select id="${matchKey}_winner">
                <option value="">Winner</option>
                <option value="${p1}">${p1}</option>
                <option value="${p2}">${p2}</option>
              </select>
              <select id="${matchKey}_margin">
                <option value="">Margin</option>
                <option value="1 up">1 up</option>
                <option value="2 & 1">2 & 1</option>
                <option value="3 & 2">3 & 2</option>
                <option value="4 & 3">4 & 3</option>
                <option value="5 & 4">5 & 4</option>
                <option value="6 & 5">6 & 5</option>
                <option value="7 & 6">7 & 6</option>
                <option value="8 & 7">8 & 7</option>
                <option value="9 & 8">9 & 8</option>
              </select>
              <button onclick="submitResult('${matchKey}')">Submit</button>
              <span id="${matchKey}_result" style="margin-left:1rem;"></span>
            `;
            groupDiv.appendChild(matchDiv);

            db.ref("results/" + matchKey).on("value", snapshot => {
              const result = snapshot.val();
              const resultSpan = document.getElementById(`${matchKey}_result`);
              if (result) {
                resultSpan.textContent = `${result.winner} won ${result.margin}`;
              } else {
                resultSpan.textContent = "";
              }
            });
          }
        }
        container.appendChild(groupDiv);
      }
    }

    function submitResult(matchKey) {
      const winner = document.getElementById(`${matchKey}_winner`).value;
      const margin = document.getElementById(`${matchKey}_margin`).value;
      if (winner && margin) {
        db.ref("results/" + matchKey).set({ winner, margin });
      } else {
        alert("Please select both winner and margin.");
      }
    }

    renderTournament();
  </script>
</body>
</html>
